<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 780 720" font-family="'Inter', 'Helvetica Neue', Arial, sans-serif" font-size="13">
  <rect width="780" height="720" fill="#ffffff"/>

  <!-- SESSION START column -->
  <rect x="40" y="40" width="240" height="70" rx="8" fill="#f5f5f5" stroke="#000000" stroke-width="1.5"/>
  <text x="160" y="68" fill="#000000" font-size="15" font-weight="bold" text-anchor="middle">Session Start</text>
  <text x="160" y="88" fill="#555555" font-size="11" text-anchor="middle">Hook fires automatically</text>

  <!-- Arrow down from Session Start -->
  <line x1="160" y1="110" x2="160" y2="150" stroke="#000000" stroke-width="1.5"/>
  <polygon points="154,146 160,158 166,146" fill="#000000"/>

  <!-- Load identity box -->
  <rect x="50" y="160" width="220" height="70" rx="8" fill="#ffffff" stroke="#000000" stroke-width="1.2"/>
  <text x="160" y="186" fill="#000000" font-size="13" font-weight="600" text-anchor="middle">Load identity</text>
  <text x="160" y="206" fill="#666666" font-size="11" text-anchor="middle">Inject behavioral guidance</text>
  <text x="160" y="220" fill="#999999" font-size="10" text-anchor="middle">(~200 tokens)</text>

  <!-- Arrow down -->
  <line x1="160" y1="230" x2="160" y2="270" stroke="#000000" stroke-width="1.5"/>
  <polygon points="154,266 160,278 166,266" fill="#000000"/>

  <!-- Agent works box -->
  <rect x="50" y="280" width="220" height="56" rx="8" fill="#ffffff" stroke="#000000" stroke-width="1.2"/>
  <text x="160" y="304" fill="#000000" font-size="13" font-weight="600" text-anchor="middle">Agent works normally</text>
  <text x="160" y="322" fill="#999999" font-size="11" text-anchor="middle">(zero latency impact)</text>

  <!-- SESSION END column -->
  <rect x="500" y="40" width="240" height="70" rx="8" fill="#f5f5f5" stroke="#000000" stroke-width="1.5"/>
  <text x="620" y="68" fill="#000000" font-size="15" font-weight="bold" text-anchor="middle">Session End</text>
  <text x="620" y="88" fill="#555555" font-size="11" text-anchor="middle">Hook fires automatically</text>

  <!-- Arrow down from Session End -->
  <line x1="620" y1="110" x2="620" y2="150" stroke="#000000" stroke-width="1.5"/>
  <polygon points="614,146 620,158 626,146" fill="#000000"/>

  <!-- Collect ActionLog box -->
  <rect x="490" y="160" width="260" height="70" rx="8" fill="#ffffff" stroke="#000000" stroke-width="1.2"/>
  <text x="620" y="186" fill="#000000" font-size="13" font-weight="600" text-anchor="middle">Collect ActionLog</text>
  <text x="620" y="206" fill="#666666" font-size="11" text-anchor="middle">tool calls, edits,</text>
  <text x="620" y="220" fill="#666666" font-size="11" text-anchor="middle">test results, imports</text>

  <!-- Arrow down -->
  <line x1="620" y1="230" x2="620" y2="270" stroke="#000000" stroke-width="1.5"/>
  <polygon points="614,266 620,278 626,266" fill="#000000"/>

  <!-- Reward signal R box -->
  <rect x="480" y="280" width="280" height="120" rx="8" fill="#f9f9f9" stroke="#000000" stroke-width="1.5"/>
  <text x="620" y="306" fill="#000000" font-size="14" font-weight="bold" text-anchor="middle">Reward signal R</text>
  <line x1="500" y1="316" x2="740" y2="316" stroke="#e0e0e0" stroke-width="1"/>
  <text x="510" y="338" fill="#333333" font-size="12">test pass / fail</text>
  <text x="510" y="358" fill="#333333" font-size="12">session arc completion</text>
  <text x="510" y="378" fill="#333333" font-size="12">git commit survival</text>
  <text x="510" y="398" fill="#333333" font-size="12">code-level metrics</text>

  <!-- Arrow down from R -->
  <line x1="620" y1="400" x2="620" y2="440" stroke="#000000" stroke-width="1.5"/>
  <polygon points="614,436 620,448 626,436" fill="#000000"/>

  <!-- ARIL backward pass box -->
  <rect x="480" y="450" width="280" height="120" rx="8" fill="#f0f0f0" stroke="#000000" stroke-width="2"/>
  <text x="620" y="476" fill="#000000" font-size="14" font-weight="bold" text-anchor="middle">ARIL backward pass</text>
  <line x1="500" y1="486" x2="740" y2="486" stroke="#cccccc" stroke-width="1"/>
  <text x="510" y="508" fill="#333333" font-size="12">Shapley attribution</text>
  <text x="510" y="528" fill="#333333" font-size="12">Replicator dynamics</text>
  <text x="510" y="548" fill="#333333" font-size="12">Möbius interactions</text>
  <text x="510" y="568" fill="#333333" font-size="12">Energy landscape PDE</text>

  <!-- Arrow down from ARIL -->
  <line x1="620" y1="570" x2="620" y2="610" stroke="#000000" stroke-width="1.5"/>
  <polygon points="614,606 620,618 626,606" fill="#000000"/>

  <!-- Output box -->
  <rect x="460" y="620" width="300" height="80" rx="8" fill="#f5f5f5" stroke="#000000" stroke-width="1.5"/>
  <text x="610" y="648" fill="#000000" font-size="13" font-weight="600" text-anchor="middle">Weights evolve → Solana</text>
  <text x="610" y="668" fill="#666666" font-size="12" text-anchor="middle">Strategy file updates</text>
  <text x="610" y="686" fill="#666666" font-size="12" text-anchor="middle">Next session starts smarter</text>

  <!-- Curved feedback arrow from output back to session start -->
  <path d="M 460 660 C 350 660, 280 600, 240 500 C 200 400, 180 360, 160 336"
        fill="none" stroke="#000000" stroke-width="1.2" stroke-dasharray="6,4"/>
  <polygon points="156,342 160,330 166,342" fill="#000000"/>

  <!-- Feedback label -->
  <text x="270" y="540" fill="#999999" font-size="10" text-anchor="middle" transform="rotate(-55, 270, 540)">feedback loop</text>
</svg>
