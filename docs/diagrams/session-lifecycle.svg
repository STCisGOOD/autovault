<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 520 520" font-family="'Courier New', monospace" font-size="12">
  <defs>
    <linearGradient id="g1" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#1a1a2e"/>
      <stop offset="100%" stop-color="#0a0a0f"/>
    </linearGradient>
  </defs>

  <rect width="520" height="520" rx="8" fill="url(#g1)"/>

  <!-- SESSION START -->
  <rect x="20" y="20" width="480" height="130" rx="6" fill="none" stroke="#00ff88" stroke-width="1.5" opacity="0.8"/>
  <text x="40" y="46" fill="#00ff88" font-size="13" font-weight="bold">SESSION START</text>
  <text x="40" y="70" fill="#c0c0c0" font-size="11">1. Hook fires (Claude Code subprocess)</text>
  <text x="40" y="88" fill="#c0c0c0" font-size="11">2. Loads ARIL state from ~/.agent-identity/state/</text>
  <text x="40" y="106" fill="#c0c0c0" font-size="11">3. Injects behavioral guidance → .aril/strategies.md</text>
  <text x="40" y="124" fill="#c0c0c0" font-size="11">4. Initializes trajectory evaluator + SQLite</text>

  <!-- Arrow down -->
  <line x1="260" y1="150" x2="260" y2="180" stroke="#00ff88" stroke-width="1.5" opacity="0.5"/>
  <polygon points="254,176 260,186 266,176" fill="#00ff88" opacity="0.5"/>

  <!-- DURING SESSION -->
  <rect x="20" y="186" width="480" height="130" rx="6" fill="none" stroke="#22d3ee" stroke-width="1.5" opacity="0.8"/>
  <text x="40" y="212" fill="#22d3ee" font-size="13" font-weight="bold">DURING SESSION</text>
  <text x="40" y="236" fill="#c0c0c0" font-size="11">5. Every tool call → PostToolUse hook fires (async)</text>
  <text x="40" y="254" fill="#c0c0c0" font-size="11">6. Write/Edit calls → trajectory metrics computed</text>
  <text x="40" y="272" fill="#c0c0c0" font-size="11">7. Git commits detected → tracked for survival</text>
  <text x="40" y="290" fill="#c0c0c0" font-size="11">8. Zero latency impact on the agent</text>

  <!-- Arrow down -->
  <line x1="260" y1="316" x2="260" y2="346" stroke="#22d3ee" stroke-width="1.5" opacity="0.5"/>
  <polygon points="254,342 260,352 266,342" fill="#22d3ee" opacity="0.5"/>

  <!-- SESSION END -->
  <rect x="20" y="352" width="480" height="148" rx="6" fill="none" stroke="#fbbf24" stroke-width="1.5" opacity="0.8"/>
  <text x="40" y="378" fill="#fbbf24" font-size="13" font-weight="bold">SESSION END</text>
  <text x="40" y="402" fill="#c0c0c0" font-size="11">9.  Outcome signals computed (test results, errors)</text>
  <text x="40" y="420" fill="#c0c0c0" font-size="11">10. ARIL backward pass → weights updated</text>
  <text x="40" y="438" fill="#c0c0c0" font-size="11">11. Shapley attribution → per-feature credit</text>
  <text x="40" y="456" fill="#c0c0c0" font-size="11">12. Strategy file regenerated for next session</text>
  <text x="40" y="474" fill="#c0c0c0" font-size="11">13. State persisted to ~/.agent-identity/state/</text>
  <text x="40" y="492" fill="#c0c0c0" font-size="11">14. Optionally: declarations pushed on-chain</text>
</svg>
